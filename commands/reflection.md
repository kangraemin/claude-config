---
description: 세션 회고 및 설정 개선 제안
---

# /reflection

세션을 마무리한다. 회고 → 개선 → memory 저장 → handoff → 커밋까지 한 번에 처리.

---

## 실행 흐름

### Step 1: 세션 분석

이번 대화에서 다음을 분석한다:

1. **작업 요약**: 무엇을 했는지
2. **반복 패턴**: 같은 류의 요청이 반복되었는지
3. **비효율/마찰**: 불필요한 확인, 실패한 시도, 돌아간 경로
4. **사용자 선호도**: 암묵적으로 드러난 작업 방식, 스타일

### Step 2: 개선점 도출

분석 결과를 바탕으로 개선할 수 있는 항목을 도출한다:

- **CLAUDE.md**: 추가/수정할 글로벌 규칙
- **rules/**: 새로운 규칙 파일 또는 기존 규칙 수정
- **settings.json**: 권한, 환경변수, 훅 설정
- **commands/**: 새 커맨드 또는 기존 커맨드 개선
- **agents/**: 에이전트 역할/규칙 조정

### Step 3: 제안 보고

다음 형식으로 보고한다:

```
## 세션 회고

### 작업 요약
- (이번 세션에서 한 일)

### 발견한 패턴
- (반복된 행동, 비효율, 선호도)

### 개선 제안
| # | 대상 파일 | 변경 내용 | 이유 |
|---|-----------|-----------|------|
| 1 | ...       | ...       | ...  |
| 2 | ...       | ...       | ...  |

### 적용하시겠습니까?
- 전체 적용
- 번호 선택 (예: 1, 3)
- 건너뛰기
```

### Step 4: 승인 후 적용

- 사용자가 선택한 항목만 적용한다.

### Step 5: Memory 갱신

auto memory 디렉토리의 `MEMORY.md`를 갱신한다.

**갱신 대상** (이번 세션에서 실제로 관찰/결정된 것만):
- 아키텍처 결정사항
- 워크플로우 변경
- 사용자 선호도
- 해결한 문제와 해결 방법

**규칙:**
- 기존 memory 내용을 먼저 읽고, 중복이면 업데이트 (새로 추가하지 않음).
- 세션 한정 정보 (임시 상태, 진행 중 작업)는 넣지 않음.
- 200줄 이내로 유지 (MEMORY.md는 매 세션 로드됨).
- 날짜를 기록하여 언제 결정된 건지 알 수 있게.

### Step 6: Handoff (미완료 작업이 있을 때만)

세션에서 **완료되지 않은 작업**이 있으면 프로젝트 루트에 `HANDOFF.md`를 생성한다.

**작성 기준:**
- 다음 세션의 Claude가 이 파일만 읽고 작업을 이어갈 수 있어야 함.
- 시도한 것, 성공한 것, 실패한 것, 다음 단계를 명확히.

**형식:**
```markdown
# Handoff: (작업 제목)

## 목표
- 최종적으로 달성하려는 것

## 완료된 것
- ✅ 완료 항목

## 시도했지만 실패한 것
- ❌ 실패 항목: 원인

## 다음 단계
1. 구체적인 다음 액션
2. ...
```

**미완료 작업이 없으면 이 단계를 건너뛴다.** 기존 HANDOFF.md가 있고 작업이 완료되었으면 삭제한다.

### Step 7: 커밋 + 마무리

1. `/commit` 플로우 실행 (미커밋 변경사항이 있을 때만).
2. 마지막으로 안내:

```
✅ 세션 마무리 완료. `/clear`로 컨텍스트를 정리하세요.
```

---

## 주의사항

- 추측으로 규칙을 만들지 않는다. 이번 세션에서 **실제로 관찰된 것**만 근거로 삼는다.
- 기존 규칙과 충돌하는 제안은 하지 않는다. 충돌 시 기존 규칙 수정을 제안한다.
- 사소한 개선은 제안하지 않는다. 체감 차이가 있는 것만.
- memory에 불확실한 정보를 넣지 않는다.
- HANDOFF.md는 미완료 작업이 있을 때만 생성한다.
